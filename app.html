<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<title>App_Vue_Simple</title>
</head>

<body background="https://mediaim.expedia.com/destination/1/658acad08e3970d5a75f31744eb3c959.jpg"
	style="background-repeat: no-repeat; background-size: cover;" class="bg-primary">
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		
		<a class="navbar-brand" href="#">Parkings publics Nantes</a>
		<button id="mon-bouton">Afficher les Parkings</button>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
			aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item active">
					<a class="nav-link" href="#"><span class="sr-only"></span></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#"></a>
				</li>
			</ul>
		</div>
	</nav>
	<div class="container mt-5">
		<div id="appvuesimple">
			<div class="row">
				<div class="col-sm">
					<h1 class="display-4 text-light">Parkings publics Nantes</h1>
					<p class="lead text-light">Bienvenue sur notre site qui vous présente tous les parkings de la ville
						de Nantes avec toutes les infos nécessaires</p>
				</div>
			</div>
			<h2  class="display-4 text-light">Liste des parkings</h2>
			<template v-for="branch in branches">
				<input type="radio" :id="branch" :value="branch" name="branch" v-model="currentBranch" />
				<label :for="branch">{{ branch }}</label>
			</template>

			<div class="col-sm">
				<p><span>
			</div>
			<div class="col-sm">

			</div>
			<div class="text-align" id="dataContainer"></div>



		</div>
	</div>
	</div>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="https://unpkg.com/vue@3"></script>
	<script>
		const apiURL =
			"https://data.nantesmetropole.fr/api/records/1.0/search/?dataset=244400404_parkings-publics-nantes&q=&rows=11&facet=libcategorie&facet=libtype&facet=acces_pmr&facet=service_velo&facet=stationnement_velo&facet=stationnement_velo_securise&facet=moyen_paiement";
		const config = {
		};
		const monBouton = document.getElementById('mon-bouton');
		monBouton.addEventListener('click', () => {
			Vue.createApp({
				data() {
				return {
					data: ""

				};
			},

			created: function () {
				this.fetchDataAsync()
			},

			methods: {
				fetchDataAsync: async function () {
					try {
						const response = await axios.get(apiURL, config)
						console.log("ok")
						console.log(response.data)
						this.data = response.data.records
						var div = '<div style= "display:flex;gap:10px; font-size: 190%;font-weight:bold;color:white;">'
						var div1 = '<div>'
						var div2 = '<div>'
						var div3 = '<div>'
						//var str = '<ul style = "font-size: 200%;font-weight:bold;color:white" >'
						for (var i = 0; i < this.data.length; i++) {
							//str += '<li>'+"adresse: "+ this.data[i]["fields"]["adresse"] +" - nombre de places: "+this.data[i]["fields"]["capacite_moto"]+  '</li>';
							div1 += '<div> adresse: : ' + this.data[i]["fields"]["adresse"] + '</div>'
							div2 += '<div> capacité moto: ' + this.data[i]["fields"]["capacite_moto"] + '</div>'
							div3 += '<div> capacité voiture: ' + this.data[i]["fields"]["capacite_voiture"] + '</div>'
						}
						div1 += '</div>'
						div2 += '</div>'
						div3 += '</div>'
						div += div1 + div2 + div3 + '</div>'
						//str += '</ul>'
						document.getElementById("dataContainer").innerHTML = div;

					} catch (error) {
						console.log(error);
					}
				},
			},
			}).mount('#appvuesimple');
		});

	</script>
</body>

</html>